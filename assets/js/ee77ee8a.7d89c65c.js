"use strict";(globalThis.webpackChunkdocusaurus_book=globalThis.webpackChunkdocusaurus_book||[]).push([[540],{4755(e,a,t){t.r(a),t.d(a,{default:()=>n});var r=t(6540),s=t(1804),o=t(6025),i=t(8259),l=t(4848);const n=function(){const{user:e,loading:a,fetchUser:t}=(0,i.A)(),[n,u]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),g=(0,o.Ay)("/profile");return(0,r.useEffect)(()=>{e&&(u(e.name||""),c(e.software_background||""),p(e.hardware_background||""))},[e]),a?(0,l.jsx)(s.A,{title:"Update Profile",children:(0,l.jsx)("div",{className:"auth-container",children:(0,l.jsx)("p",{children:"Loading..."})})}):e?(0,l.jsx)(s.A,{title:"Update Profile",description:"Update your user profile",children:(0,l.jsx)("div",{className:"auth-container",children:(0,l.jsxs)("div",{className:"auth-card",children:[(0,l.jsx)("h1",{className:"auth-title",children:"Update Profile"}),(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f("Updating profile...");try{const e=localStorage.getItem("access_token"),a=await fetch("http://127.0.0.1:8000/api/auth/users/me/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:n,software_background:d,hardware_background:h})}),r=await a.json();if(!a.ok)throw new Error(r.detail||"Failed to update profile");await t(),f("Profile updated successfully!"),window.location.href=g}catch(a){console.error("Update profile error:",a),f(a.message||"An error occurred during update.")}},children:[(0,l.jsxs)("div",{className:"auth-form-group",children:[(0,l.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,l.jsx)("input",{id:"name",type:"text",className:"auth-input",value:n,onChange:e=>u(e.target.value)})]}),(0,l.jsxs)("div",{className:"auth-form-group",children:[(0,l.jsx)("label",{htmlFor:"software",children:"Software Background"}),(0,l.jsx)("input",{id:"software",type:"text",className:"auth-input",value:d,onChange:e=>c(e.target.value)})]}),(0,l.jsxs)("div",{className:"auth-form-group",children:[(0,l.jsx)("label",{htmlFor:"hardware",children:"Hardware Background"}),(0,l.jsx)("input",{id:"hardware",type:"text",className:"auth-input",value:h,onChange:e=>p(e.target.value)})]}),m&&(0,l.jsx)("p",{className:"auth-message",children:m}),(0,l.jsx)("button",{type:"submit",className:"auth-button",children:"Update Profile"})]})]})})}):(0,l.jsx)(s.A,{title:"Update Profile",children:(0,l.jsx)("div",{className:"auth-container",children:(0,l.jsx)("p",{children:"You must be logged in to update your profile."})})})}}}]);