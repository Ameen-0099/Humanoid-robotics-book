"use strict";(globalThis.webpackChunkdocusaurus_book=globalThis.webpackChunkdocusaurus_book||[]).push([[555],{7137(e,o,r){r.r(o),r.d(o,{default:()=>c});var s=r(6540),a=r(1804),t=r(4586),l=r(6025),i=r(8774),n=r(4848);const c=function(){const{siteConfig:e}=(0,t.A)(),[o,r]=(0,s.useState)(null),[c,d]=(0,s.useState)("Loading profile..."),u=(0,l.Ay)("/login");return(0,s.useEffect)(()=>{(async()=>{const s=localStorage.getItem("access_token");if(!s)return void d("You are not logged in.");const a=`${e.customFields.apiBaseUrl}/api/auth/users/me/`;try{const e=await fetch(a,{headers:{Authorization:`Bearer ${s}`}});if(e.ok){const s=await e.json();console.log("User data from API:",s),r(s),console.log("User object after setting state:",o),d("")}else d(`Failed to load profile: ${e.statusText}`),localStorage.removeItem("access_token")}catch(t){console.error("Profile fetch error:",t),d("An error occurred while loading your profile.")}})()},[]),(0,n.jsx)(a.A,{title:"Profile",description:"User Profile",children:(0,n.jsx)("main",{className:"profile-container",children:(0,n.jsxs)("div",{className:"profile-card",children:[c&&(0,n.jsx)("p",{children:c}),o&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"profile-header",children:[(0,n.jsx)("h1",{className:"profile-title",children:o.name||"User Profile"}),(0,n.jsx)("p",{className:"profile-email",children:o.email})]}),(0,n.jsxs)("div",{className:"profile-details",children:[o.software_background&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Software Background:"})," ",o.software_background]}),o.hardware_background&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Hardware Background:"})," ",o.hardware_background]})]}),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("access_token"),window.location.href=u},className:"profile-logout-button",children:"Log Out"}),(0,n.jsx)(i.A,{to:"/update-profile",className:"button button--secondary button--md",children:"Update Profile"})]}),!o&&!c&&(0,n.jsx)("div",{style:{textAlign:"center"},children:(0,n.jsxs)("p",{children:["Please ",(0,n.jsx)(i.A,{to:"/login",children:"log in"})," to view your profile."]})})]})})})}}}]);